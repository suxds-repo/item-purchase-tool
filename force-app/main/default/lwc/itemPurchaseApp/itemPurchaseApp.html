<template>
    <!-- Header -->
    <div class="slds-grid slds-grid_align-spread slds-p-around_small slds-border_bottom">
        <template if:true={isManager}>        
            <lightning-button label="Create Item" variant="brand" onclick={handleOpenCreateModal}></lightning-button>
        </template>
        <template if:true={account}>
            <div class="slds-text-heading_small slds-align-middle">
                {account.Name} | {account.AccountNumber} | {account.Industry}
            </div>
        </template>
        <lightning-button label="Cart" onclick={openCartModal}></lightning-button>
    </div>

    <!-- Filters -->
    <c-item-filter 
        family-options={familyOptions} 
        type-options={typeOptions} 
        onfilterchanged={handleFilterChanged}>
    </c-item-filter>

    <c-item-list 
        items={items} 
        ondetailsclicked={handleDetails}
        onaddtocart={handleAddToCart}>
    </c-item-list>

    <c-item-create-modal 
        if:true={showCreateModal} 
        family-options={familyOptions} 
        type-options={typeOptions} 
        oncreated={handleItemCreated} 
        oncanceled={handleCloseCreateModal}>
    </c-item-create-modal>

    <template if:true={showDetailsModal}>
        <c-item-details-modal item={selectedItem} onclosed={handleCloseDetails}></c-item-details-modal>
    </template>


    <template if:true={showCartModal}>

        <section class="slds-modal slds-fade-in-open">

            <div class="slds-modal__container">

                <header class="slds-modal__header">
                    <h2 class="slds-text-heading_medium">
                        Cart ({cart.length})
                    </h2>
                </header>


                <div class="slds-modal__content slds-p-around_medium">

                    <lightning-datatable
                        key-field="Id"
                        data={cart}
                        columns={cartColumns}
                        hide-checkbox-column>
                    </lightning-datatable>

                </div>


                <footer class="slds-modal__footer">

                    <lightning-button
                        label="Checkout"
                        variant="brand"
                        onclick={handleCheckout}>
                    </lightning-button>

                    <lightning-button
                        label="Close"
                        onclick={closeCartModal}>
                    </lightning-button>


                </footer>

            </div>

        </section>

        <div class="slds-backdrop slds-backdrop_open"></div>

    </template>

</template>
